{% extends "layout.html" %}
{% block main %}
<div class="columns">
    <div class="column is-3">
        <ul id="tab-selector">
            <li class="active"><a href="#" data-target="t0">{{ month + ' ' + weekday + 's' }}</a></li>
            <li><a href="#" data-target="t1">{{ 'Every ' + month }}</a></li>
            <li><a href="#" data-target="t2">{{ 'Every ' + weekday }}</a></li>
            <li><a href="#" data-target="t3">Current time</a></li>
            <li><a href="#" data-target="t4">By month</a></li>
            <li><a href="#" data-target="t5">By day</a></li>
            <li><a href="#" data-target="t6">By time interval</a></li>
            <li><a href="#" data-target="t7">By month and day</a></li>
            <li><a href="#" data-target="t8">By day and time</a></li>
            <li><a href="#" data-target="t9">Ungrouped</a></li>
        </ul>
    </div>
    <div class="column is-9">
        <p style="font-size: small;">Showing top {{ top_n }} results in each grouping</p>

        <br/>

        <div id="tab-content">
            <div id="t0">
                <h4 style="font-weight: bolder;">{{ month + ' ' + weekday + 's ' + 'frequencies' }}</h4>
                {% if data['this_months_weekday'].shape[0] > 0 %}
                {{ data['this_months_weekday'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t1" class="hidden">
                <h4 style="font-weight: bolder;">{{ 'Every ' + month + ' frequencies' }}</h4>
                {% if data['this_month'].shape[0] > 0 %}
                {{ data['this_month'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t2" class="hidden">
                <h4 style="font-weight: bolder;">{{ 'Every ' + weekday + ' frequencies' }}</h4>
                {% if data['this_weekday'].shape[0] > 0 %}
                {{ data['this_weekday'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t3" class="hidden">
                <h4 style="font-weight: bolder;">{{ 'Frequencies at current time interval' }}</h4>
                {% if data['this_time'].shape[0] > 0 %}
                {{ data['this_time'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t4" class="hidden">
                <h4 style="font-weight: bolder;">Frequencies by month</h4>
                {% if data['by_month'].shape[0] > 0 %}
                {{ data['by_month'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t5" class="hidden">
                <h4 style="font-weight: bolder;">Frequencies by day</h4>
                {% if data['by_day'].shape[0] > 0 %}
                {{ data['by_day'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t6" class="hidden">
                <h4 style="font-weight: bolder;">Frequencies by time interval</h4>
                {% if data['by_time'].shape[0] > 0 %}
                {{ data['by_time'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t7" class="hidden">
                <h4 style="font-weight: bolder;">Frequencies by month and day</h4>
                {% if data['by_month_and_day'].shape[0] > 0 %}
                {{ data['by_month_and_day'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t8" class="hidden">
                <h4 style="font-weight: bolder;">Frequencies by day and time interval</h4>
                {% if data['by_time_and_day'].shape[0] > 0 %}
                {{ data['by_time_and_day'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>

            <div id="t9" class="hidden">
                <h4 style="font-weight: bolder;">All frequencies</h4>
                {% if data['all_freqs'].shape[0] > 0 %}
                {{ data['all_freqs'].to_html(index=False, border=0, classes=('table', 'is-narrow', 'is-striped', 'is-hoverable'))|safe }}
                {% else %}
                <p>No data to show</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block style %}
<style>
    #tab-selector > li > a {
        color: #666;
    }
    #tab-selector > li.active > a {
        font-weight: bold;
        color: darkorange;
    }
    #tab-content > div.hidden {
        display: none;
    }
</style>
{% endblock %}

{% block footer %}{% endblock %}

{% block scripts %}
<script type="application/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('#tab-selector > li > a').forEach(el => {
            let target_id = el.getAttribute('data-target');
            el.addEventListener('click', ev => {
                document.querySelectorAll('#tab-selector > li').forEach(li => li.classList.remove('active'));
                ev.target.parentElement.classList.add('active');
                document.querySelectorAll('#tab-content > div').forEach(el => el.classList.add('hidden'));
                document.getElementById(target_id).classList.remove('hidden');
            })
        })
    });

</script>
{% endblock %}